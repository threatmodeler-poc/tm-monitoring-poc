version: "3.9"

services:
  tm-monitoring-tool:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        VUE_APP_SERVICE_TYPES_API_URL: ${VUE_APP_SERVICE_TYPES_API_URL:-https://n6njvo4l45.execute-api.us-east-1.amazonaws.com/region}
    image: tm-monitoring-tool:1.0.0
    container_name: tm-monitor
    restart: unless-stopped
    ports:
      - "3001:3001"
    volumes:
      - ./data:/app/data
    environment:
      NODE_ENV: production
      VUE_APP_SERVICE_TYPES_API_URL: ${VUE_APP_SERVICE_TYPES_API_URL:-https://n6njvo4l45.execute-api.us-east-1.amazonaws.com/region}
    networks:
      - tm-net
  # Removed default uptime-kuma image; building via tm-monitoring-tool service

volumes:
  tm-monitoring-data:

networks:
  tm-net:
    external: true   # <-- use the pre-existing network that MSSQL is already on
